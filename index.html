<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Empleo - Verificación</title>
    <style>
        /* ESTÉTICA COMANDO ZEUS: ALTA CONVERSIÓN */
        :root {
            --amazon-orange: #FF9900;
            --amazon-blue: #232F3E;
            --amazon-light-blue: #37475A;
            --white: #ffffff;
            --alert-red: #d0021b;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f2f4f8;
            margin: 0;
            padding: 0;
            color: #333;
        }

        /* HEADER */
        .header {
            background-color: var(--amazon-blue);
            padding: 15px;
            text-align: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* CONTENEDOR PRINCIPAL */
        .container {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            text-align: center;
        }

        /* TÍTULO DE LA OFERTA */
        h1 {
            color: var(--amazon-blue);
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .subtitle {
            color: #555;
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        /* BARRA DE ESTADO */
        .status-bar {
            background-color: #e7f4e4;
            color: #1c7430;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            font-weight: bold;
            border: 1px solid #c3e6cb;
            margin-bottom: 20px;
        }

        /* IMAGEN SIMULADA DE CAJAS */
        .job-image {
            width: 100%;
            height: 150px;
            background-color: #ddd;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #777;
            margin-bottom: 20px;
            background-image: url('https://via.placeholder.com/600x150?text=Vacante+Logística+USA'); /* Puedes cambiar esto por tu imagen */
            background-size: cover;
        }

        /* PASO 1: LA TRAMPA DE MIEL (FREECASH) */
        .step-box {
            border: 2px solid var(--amazon-orange);
            background-color: #fff8e1;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .step-title {
            color: #b12704;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
        }

        .instruction {
            font-size: 1.1rem;
            font-weight: bold;
            margin: 10px 0;
            color: var(--amazon-blue);
        }

        .details {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 15px;
        }

        /* BOTÓN DE ACCIÓN MASIVA */
        .btn-main {
            display: block;
            width: 100%;
            padding: 18px;
            background: linear-gradient(to bottom, #f7dfa5, #f0c14b);
            border: 1px solid #a88734;
            border-radius: 5px;
            color: #111;
            font-size: 1.2rem;
            font-weight: bold;
            text-decoration: none;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: transform 0.1s;
        }

        .btn-main:active {
            transform: scale(0.98);
        }

        .btn-main:hover {
            background: linear-gradient(to bottom, #f5d78e, #eeb933);
        }

        /* SOCIAL PROOF (TESTIMONIOS FALSOS PERO CREÍBLES) */
        .reviews {
            margin-top: 30px;
            text-align: left;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }

        .review-item {
            font-size: 0.8rem;
            color: #555;
            margin-bottom: 10px;
        }

        .stars {
            color: var(--amazon-orange);
        }

        /* FOOTER */
        .footer {
            margin-top: 30px;
            font-size: 0.7rem;
            color: #999;
            text-align: center;
        }
    </style>
</head>
<body>

    <div class="header">
        USA JOB APPLICATIONS PORTAL
    </div>

    <div class="container">
        <h1>Vacante: Armado y Empaque (Remoto)</h1>
        <div class="subtitle">Pago estimado: $205/día - Ubicación: USA (Requerido)</div>

        <div class="status-bar">
            ✅ ELEGIBILIDAD PRE-APROBADA
        </div>

        <div class="step-box">
            <div class="step-title">PASO 1: VERIFICACIÓN DE USUARIO</div>
            
            <p class="instruction">Activa tu cuenta de trabajador y reclama tu bono de equipo.</p>
            
            <p class="details">
                Para evitar bots, necesitamos que verifiques tu dispositivo. 
                El sistema te pagará un bono de <b>$2.50 - $25.00</b> inmediatamente al completar tu perfil.
            </p>

          <button onclick="llamarLocker();"> CONTINUAR REGISTRO ➜ </button> 

            
            <script>
function showTapRainOffers() {
    const overlay = document.createElement('div');
    overlay.className = 'tap-rain-modal-overlay';
    overlay.style.display = 'flex';
    overlay.style.backgroundColor = 'rgba(0,0,0,0.3)';
    
    const modal = document.createElement('div');
    modal.className = 'tap-rain-modal';
    
    const contentContainer = document.createElement('div');
    contentContainer.className = 'tap-rain-modal-content';
    
    contentContainer.innerHTML = "<div class=\"offers-grid\"> <div id=\"offerContainer\" class=\"grid\"></div></div>";
    
    const style = document.createElement('style');
    style.textContent = ".offers-grid { padding: 1rem; background: #ffffff; border-radius: 8px;}.offer-item { background: #ffffff; border: 1px solid #e5e7eb; border-radius: 8px; padding: 1rem; color: #212529; font-family: sans-serif; font-size: 0.875rem; font-weight: 400; transition: all 200ms ease; cursor: pointer;}.offer-item:hover { background: #f8f9fa;}.offers-grid #offerContainer { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 1rem;}.tap-rain-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: transparent; opacity: 1; display: flex; align-items: center; justify-content: center; z-index: 9999;}.tap-rain-modal { background: #ffffff; width: 80%; max-width: 95%; max-height: 90vh; border-radius: 8px; overflow: auto; position: relative;}";
    
    modal.appendChild(contentContainer);
    overlay.appendChild(modal);
    document.head.appendChild(style);
    document.body.appendChild(overlay);
    
    overlay.addEventListener('click', function(e) {
        if (e.target === overlay) {
            document.body.removeChild(overlay);
        }
    });
    
    if (typeof jQuery === 'undefined') {
        const script = document.createElement('script');
        script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js';
        script.onload = loadOffers;
        document.head.appendChild(script);
    } else {
        loadOffers();
    }
    
    function loadOffers() {
        // Get user IP for geo-targeting
        fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(ipData => {
            // Detect TikTok traffic
            const fromTikTok = document.referrer.toLowerCase().includes('tiktok.com') ||
                             window.location.search.includes('t=1') ||
                             window.location.search.includes('source=t') ||
                             window.location.search.includes('ref=tt');
            
            // Fetch from dual provider system
            fetch('https://taprain.com/api/templates/offers', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    s1: '67cbd0fb02e7d693a0d94d25',
                    s2: 'modal-template',
                    userAgent: navigator.userAgent,
                    clientIp: ipData.ip,
                    referer: document.referrer,
                    templateId: 'custom-modal',
                    offerCount: 5,
                    fromTikTok: fromTikTok,
                    urlParams: window.location.search
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.offers && data.offers.length > 0) {
                    let html = "";
                    
                    data.offers.forEach(offer => {
                        html += '<div class="offer-item" data-offer-id="' + offer.id + 
                               '" data-offer-name="' + offer.anchor + 
                               '" data-offer-url="' + offer.url + 
                               '" data-provider="' + offer.provider + '">' +
                               '<div class="offer-title">' + offer.anchor + '</div>' +
                               '</div>';
                    });
                    
                    const offerContainer = document.getElementById("offerContainer");
                    if (offerContainer) {
                        offerContainer.innerHTML = html;
                        
                        // Add click handlers
                        offerContainer.addEventListener("click", function(e) {
                            const offerItem = e.target.closest(".offer-item");
                            if (offerItem) {
                                e.preventDefault();
                                
                                const offerUrl = offerItem.getAttribute("data-offer-url");
                                const offerId = offerItem.getAttribute("data-offer-id");
                                const offerName = offerItem.getAttribute("data-offer-name");
                                const templateId = offerItem.getAttribute("data-template-id") || "custom-modal";
                                const provider = offerItem.getAttribute("data-provider") || "unknown";
                                
                                if (offerUrl) {
                                    // Track the click using the same endpoint as roblox-3.html
                                    const trackImg = new Image();
                                    trackImg.src = 'https://taprain.com/api/stats/public-track-click?offerId=' + 
                                                  encodeURIComponent(offerId || '') + 
                                                  '&offerName=' + encodeURIComponent(offerName || '') + 
                                                  '&templateId=' + encodeURIComponent(templateId) + 
                                                  '&provider=' + encodeURIComponent(provider) +
                                                  '&userId=' + encodeURIComponent("67cbd0fb02e7d693a0d94d25");
                                    
                                    // Also send to templates endpoint as backup
                                    fetch('https://taprain.com/api/templates/track-click', {
                                        method: 'POST',
                                        headers: {
                                            'Content-Type': 'application/json'
                                        },
                                        body: JSON.stringify({
                                            offerId: offerId,
                                            offerName: offerName,
                                            templateId: templateId,
                                            provider: provider,
                                            userId: "67cbd0fb02e7d693a0d94d25",
                                            timestamp: Date.now()
                                        })
                                    }).catch(error => {
                                        console.log('Templates tracking backup failed:', error);
                                    });
                                    
                                    // Prepare final URL with notrack parameter
                                    let finalUrl = offerUrl;
                                    if (!finalUrl.includes('notrack=')) {
                                        finalUrl += (finalUrl.includes('?') ? '&' : '?') + 'notrack=true';
                                    }
                                    
                                    // Open with delay to ensure tracking fires
                                    setTimeout(function() {
                                        window.open(finalUrl, "_blank", "noopener,noreferrer");
                                    }, 100);
                                    
                                    console.log('Modal tracked offer click:', offerId, offerName, templateId, provider);
                                }
                            }
                        });
                        
                        // Setup carousel if needed
                        if (document.querySelector('.offers-carousel')) {
                            const container = offerContainer;
                            const items = container.children;
                            let currentIndex = 0;
                            const itemWidth = 320;
                            
                            const prevBtn = document.querySelector('.carousel-prev');
                            const nextBtn = document.querySelector('.carousel-next');
                            
                            if (prevBtn) {
                                prevBtn.addEventListener('click', function() {
                                    if (currentIndex > 0) {
                                        currentIndex--;
                                        container.style.transform = 'translateX(-' + (currentIndex * itemWidth) + 'px)';
                                    }
                                });
                            }
                            
                            if (nextBtn) {
                                nextBtn.addEventListener('click', function() {
                                    if (currentIndex < items.length - 1) {
                                        currentIndex++;
                                        container.style.transform = 'translateX(-' + (currentIndex * itemWidth) + 'px)';
                                    }
                                });
                            }
                        }
                    }
                    
                    console.log('Modal loaded', data.offers.length, 'offers from dual provider system');
                } else {
                    console.error("No offers received from dual provider system");
                }
            })
            .catch(error => {
                console.error("Error fetching offers:", error);
            });
        })
        .catch(error => {
            console.error("Error getting IP:", error);
            // Fallback without IP detection
            console.log("Loading offers without IP detection...");
        });
    }
}

window.showTapRainOffers = showTapRainOffers;
                        </script>
            
            <p style="font-size: 0.7rem; color: #777; margin-top: 10px;">
                *Al completar este paso, serás redirigido al formulario de envío de materiales.
            </p>
        </div>

        <div class="reviews">
            <div class="review-item">
                <span class="stars">★★★★★</span> <b>Maria G. (Texas)</b><br>
                "Ya completé el paso 1 y recibí el pago del bono en mi PayPal. Esperando mis cajas para empezar."
            </div>
            <div class="review-item">
                <span class="stars">★★★★★</span> <b>Jose R. (Florida)</b><br>
                "Fácil registro. Ojo: tienen que bajar la app que les piden para que se active la cuenta."
            </div>
        </div>

    </div>

    <div class="footer">
        © 2026 Recruitment Services USA. No afiliado directamente con Amazon Inc.<br>
        Esta página es un portal de reclutamiento independiente.
    </div>

</body>
</html>
